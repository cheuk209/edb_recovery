k apply -f 2.2.0_single_instance_cluster.yaml 
The request is invalid: patch: Invalid value: "{\"apiVersion\":\"postgresql.k8s.enterprisedb.io/v1\",\"kind\":\"Cluster\",\"metadata\":{\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"postgresql.k8s.enterprisedb.io/v1\\\",\\\"kind\\\":\\\"Cluster\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"single-instance-cluster\\\",\\\"namespace\\\":\\\"postgresql-operator-system\\\"},\\\"spec\\\":{\\\"instances\\\":1,\\\"storage\\\":{\\\"size\\\":\\\"500Mi\\\"},\\\"users\\\":[{\\\"name\\\":\\\"postgres\\\",\\\"secret\\\":{\\\"key\\\":\\\"password\\\",\\\"name\\\":\\\"postgres-secret\\\"}}]}}\\n\"},\"creationTimestamp\":\"2025-02-13T15:05:28Z\",\"generation\":1,\"managedFields\":[{\"apiVersion\":\"postgresql.k8s.enterprisedb.io/v1\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:kubectl.kubernetes.io/last-applied-configuration\":{}}},\"f:spec\":{\".\":{},\"f:enablePDB\":{},\"f:failoverDelay\":{},\"f:instances\":{},\"f:logLevel\":{},\"f:maxSyncReplicas\":{},\"f:minSyncReplicas\":{},\"f:postgresGID\":{},\"f:postgresUID\":{},\"f:primaryUpdateStrategy\":{},\"f:smartShutdownTimeout\":{},\"f:startDelay\":{},\"f:stopDelay\":{},\"f:storage\":{\".\":{},\"f:resizeInUseVolumes\":{},\"f:size\":{}},\"f:switchoverDelay\":{}}},\"manager\":\"kubectl-client-side-apply\",\"operation\":\"Update\",\"time\":\"2025-02-13T15:05:28Z\"},{\"apiVersion\":\"postgresql.k8s.enterprisedb.io/v1\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:status\":{\".\":{},\"f:availableArchitectures\":{},\"f:certificates\":{\".\":{},\"f:clientCASecret\":{},\"f:expirations\":{\".\":{},\"f:single-instance-cluster-ca\":{},\"f:single-instance-cluster-replication\":{},\"f:single-instance-cluster-server\":{}},\"f:replicationTLSSecret\":{},\"f:serverAltDNSNames\":{},\"f:serverCASecret\":{},\"f:serverTLSSecret\":{}},\"f:cloudNativePostgresqlCommitHash\":{},\"f:cloudNativePostgresqlOperatorHash\":{},\"f:conditions\":{},\"f:configMapResourceVersion\":{\".\":{},\"f:metrics\":{\".\":{},\"f:postgresql-operator-default-monitoring\":{}}},\"f:currentPrimary\":{},\"f:currentPrimaryTimestamp\":{},\"f:healthyPVC\":{},\"f:image\":{},\"f:instanceNames\":{},\"f:instances\":{},\"f:instancesReportedState\":{\".\":{},\"f:single-instance-cluster-1\":{\".\":{},\"f:isPrimary\":{},\"f:timeLineID\":{}}},\"f:instancesStatus\":{\".\":{},\"f:healthy\":{}},\"f:latestGeneratedNode\":{},\"f:licenseStatus\":{\".\":{},\"f:licenseStatus\":{},\"f:repositoryAccess\":{},\"f:valid\":{}},\"f:managedRolesStatus\":{},\"f:phase\":{},\"f:poolerIntegrations\":{\".\":{},\"f:pgBouncerIntegration\":{}},\"f:pvcCount\":{},\"f:readService\":{},\"f:readyInstances\":{},\"f:secretsResourceVersion\":{\".\\":{},\"f:applicationSecretVersion\":{},\"f:clientCaSecretVersion\":{},\"f:replicationSecretVersion\":{},\"f:serverCaSecretVersion\":{},\"f:serverSecretVersion\":{}},\"f:switchReplicaClusterStatus\":{},\"f:targetPrimary\":{},\"f:targetPrimaryTimestamp\":{},\"f:timelineID\":{},\"f:topology\":{\".\":{},\"f:instances\":{\".\":{},\"f:single-instance-cluster-1\":{}},\"f:nodesUsed\":{},\"f:successfullyExtracted\":{}},\"f:writeService\":{}}},\"manager\":\"manager\",\"operation\":\"Update\",\"subresource\":\"status\",\"time\":\"2025-02-13T15:06:12Z\"}],\"name\":\"single-instance-cluster\",\"namespace\":\"postgresql-operator-system\",\"resourceVersion\":\"5347\",\"uid\":\"8c20d38c-d20e-4930-9f59-c900bdb13817\"},\"spec\":{\"affinity\":{\"podAntiAffinityType\":\"preferred\"},\"bootstrap\":{\"initdb\":{\"database\":\"app\",\"encoding\":\"UTF8\",\"localeCType\":\"C\",\"localeCollate\":\"C\",\"owner\":\"app\"}},\"enablePDB\":true,\"enableSuperuserAccess\":false,\"failoverDelay\":0,\"imageName\":\"quay.io/enterprisedb/postgresql:17.2\",\"instances\":1,\"logLevel\":\"info\",\"maxSyncReplicas\":0,\"minSyncReplicas\":0,\"monitoring\":{\"customQueriesConfigMap\":[{\"key\":\"queries\",\"name\":\"postgresql-operator-default-monitoring\"}],\"disableDefaultQueries\":false,\"enablePodMonitor\":false},\"postgresGID\":26,\"postgresUID\":26,\"postgresql\":{\"parameters\":{\"archive_mode\":\"on\",\"archive_timeout\":\"5min\",\"dynamic_shared_memory_type\":\"posix\",\"full_page_writes\":\"on\",\"log_destination\":\"csvlog\",\"log_directory\":\"/controller/log\",\"log_filename\":\"postgres\",\"log_rotation_age\":\"0\",\"log_rotation_size\":\"0\",\"log_truncate_on_rotation\":\"false\",\"logging_collector\":\"on\",\"max_parallel_workers\":\"32\",\"max_replication_slots\":\"32\",\"max_worker_processes\":\"32\",\"shared_memory_type\":\"mmap\",\"shared_preload_libraries\":\"\",\"ssl_max_protocol_version\":\"TLSv1.3\",\"ssl_min_protocol_version\":\"TLSv1.3\",\"wal_keep_size\":\"512MB\",\"wal_level\":\"logical\",\"wal_log_hints\":\"on\",\"wal_receiver_timeout\":\"5s\",\"wal_sender_timeout\":\"5s\"},\"syncReplicaElectionConstraint\":{\"enabled\":false}},\"primaryUpdateMethod\":\"restart\",\"primaryUpdateStrategy\":\"unsupervised\",\"replicationSlots\":{\"highAvailability\":{\"enabled\":true,\"slotPrefix\":\"_cnp_\"},\"synchronizeReplicas\":{\"enabled\":true},\"updateInterval\":30},\"resources\":{},\"smartShutdownTimeout\":180,\"startDelay\":3600,\"stopDelay\":1800,\"storage\":{\"resizeInUseVolumes\":true,\"size\":\"500Mi\"},\"switchoverDelay\":3600,\"users\":[{\"name\":\"postgres\",\"secret\":{\"key\":\"password\",\"name\":\"postgres-secret\"}}]},\"status\":{\"availableArchitectures\":[{\"goArch\":\"amd64\",\"hash\":\"bc8b4c0bea7f3b49fa97c1a898a1af14827f594e9c03f21470b338b460ef8d60\"},{\"goArch\":\"arm64\",\"hash\":\"0198c72f132d0966aabb68d92839c5747c62ce25296850ab1364341f6442b6f0\"},{\"goArch\":\"ppc64le\",\"hash\":\"798b81a5904dcf35ac6d75aadf72e26c883311beedb44185a0e6f2c7c5f9bb90\"},{\"goArch\":\"s390x\",\"hash\":\"15830dcc39bcb1a684c1e78f77c108f9e6668ec9b80c69749ff270993e3da252\"}],\"certificates\":{\"clientCASecret\":\"single-instance-cluster-ca\",\"expirations\":{\"single-instance-cluster-ca\":\"2025-05-14 15:00:28 +0000 UTC\",\"single-instance-cluster-replication\":\"2025-05-14 15:00:28 +0000 UTC\",\"single-instance-cluster-server\":\"2025-05-14 15:00:28 +0000 UTC\"},\"replicationTLSSecret\":\"single-instance-cluster-replication\",\"serverAltDNSNames\":[\"single-instance-cluster-rw\",\"single-instance-cluster-rw.postgresql-operator-system\",\"single-instance-cluster-rw.postgresql-operator-system.svc\",\"single-instance-cluster-rw.postgresql-operator-system.svc.cluster.local\",\"single-instance-cluster-r\",\"single-instance-cluster-r.postgresql-operator-system\",\"single-instance-cluster-r.postgresql-operator-system.svc\",\"single-instance-cluster-r.postgresql-operator-system.svc.cluster.local\",\"single-instance-cluster-ro\",\"single-instance-cluster-ro.postgresql-operator-system\",\"single-instance-cluster-ro.postgresql-operator-system.svc\",\"single-instance-cluster-ro.postgresql-operator-system.svc.cluster.local\"],\"serverCASecret\":\"single-instance-cluster-ca\",\"serverTLSSecret\":\"single-instance-cluster-server\"},\"cloudNativePostgresqlCommitHash\":\"6ce4b55ce\",\"cloudNativePostgresqlOperatorHash\":\"bc8b4c0bea7f3b49fa97c1a898a1af14827f594e9c03f21470b338b460ef8d60\",\"conditions\":[{\"lastTransitionTime\":\"2025-02-13T15:06:11Z\",\"message\":\"Cluster is Ready\",\"reason\":\"ClusterIsReady\",\"status\":\"True\",\"type\":\"Ready\"},{\"lastTransitionTime\":\"2025-02-13T15:06:04Z\",\"message\":\"Continuous archiving is working\",\"reason\":\"ContinuousArchivingSuccess\",\"status\":\"True\",\"type\":\"ContinuousArchiving\"},{\"lastTransitionTime\":\"2025-02-13T15:06:11Z\",\"message\":\"velero addon is disabled\",\"reason\":\"Disabled\",\"status\":\"False\",\"type\":\"k8s.enterprisedb.io/velero\"},{\"lastTransitionTime\":\"2025-02-13T15:06:11Z\",\"message\":\"external-backup-adapter addon is disabled\",\"reason\":\"Disabled\",\"status\":\"False\",\"type\":\"k8s.enterprisedb.io/externalBackupAdapter\"},{\"lastTransitionTime\":\"2025-02-13T15:06:12Z\",\"message\":\"external-backup-adapter-cluster addon is disabled\",\"reason\":\"Disabled\",\"status\":\"False\",\"type\":\"k8s.enterprisedb.io/externalBackupAdapterCluster\"},{\"lastTransitionTime\":\"2025-02-13T15:06:12Z\",\"message\":\"kasten addon is disabled\",\"reason\":\"Disabled\",\"status\":\"False\",\"type\":\"k8s.enterprisedb.io/kasten\"}],\"configMapResourceVersion\":{\"metrics\":{\"postgresql-operator-default-monitoring\":\"2554\"}},\"currentPrimary\":\"single-instance-cluster-1\",\"currentPrimaryTimestamp\":\"2025-02-13T15:06:03.928100Z\",\"healthyPVC\":[\"single-instance-cluster-1\"],\"image\":\"quay.io/enterprisedb/postgresql:17.2\",\"instanceNames\":[\"single-instance-cluster-1\"],\"instances\":1,\"instancesReportedState\":{\"single-instance-cluster-1\":{\"isPrimary\":true,\"timeLineID\":1}},\"instancesStatus\":{\"healthy\":[\"single-instance-cluster-1\"]},\"latestGeneratedNode\":1,\"licenseStatus\":{\"licenseStatus\":\"Not enforced\",\"repositoryAccess\":false,\"valid\":false},\"managedRolesStatus\":{},\"phase\":\"Cluster in healthy state\",\"poolerIntegrations\":{\"pgBouncerIntegration\":{}},\"pvcCount\":1,\"readService\":\"single-instance-cluster-r\",\"readyInstances\":1,\"secretsResourceVersion\":{\"applicationSecretVersion\":\"5186\",\"clientCaSecretVersion\":\"5183\",\"replicationSecretVersion\":\"5185\",\"serverCaSecretVersion\":\"5183\",\"serverSecretVersion\":\"5184\"},\"switchReplicaClusterStatus\":{},\"targetPrimary\":\"single-instance-cluster-1\",\"targetPrimaryTimestamp\":\"2025-02-13T15:05:28.478566Z\",\"timelineID\":1,\"topology\":{\"instances\":{\"single-instance-cluster-1\":{}},\"nodesUsed\":1,\"successfullyExtracted\":true},\"writeService\":\"single-instance-cluster-rw\"}}": strict decoding error: unknown field "spec.users"


 strict decoding error: unknown field "spec.bootstrap.initdb.secret.key"

 GPT hallucinating a lot of fields under Cluster spec. 


 terprisedb.io/v1, Kind=Cluster"
Name: "single-instance-cluster", Namespace: "postgresql-operator-system"
for: "2.2.0_single_instance_cluster.yaml": error when patching "2.2.0_single_instance_cluster.yaml": admission webhook "mcluster.k8s.enterprisedb.io" denied the request: json: cannot unmarshal string into Go struct field BootstrapInitDB.spec.bootstrap.initdb.secret of type api.LocalObjectReference


 k apply -f 2.2.0_single_instance_cluster.yaml 
The Cluster "single-instance-cluster" is invalid: spec.storage: Invalid value: resource.Quantity{i:resource.int64Amount{value:0, scale:0}, d:resource.infDecAmount{Dec:(*inf.Dec)(0xc0010f8720)}, s:"500Mi", Format:"BinarySI"}: can't shrink existing storage from 1Gi to 500Mi

but I'd like to shrink storage. Help me delete everything then.